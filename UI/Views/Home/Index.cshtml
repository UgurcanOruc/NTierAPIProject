@model List<BikeViewModel>
@{
    ViewData["Title"] = "Home Page";
}

<div class="row">
    <div class="col-md-12">
        <button class="btn btn-primary">Add Bike</button>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <td>Bike Name</td>
                    <td>Station Name</td>
                    <td>Station Address</td>
                </tr>
            </thead>
            <tbody>
                @if (Model.Count > 0)
                {
                    foreach (var bike in Model)
                    {
                        <tr>
                            <td>@bike.Name</td>
                            <td>@bike.Station.Name</td>
                            <td>@bike.Station.Address</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>No Data</tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div id="barChart"></div>
    </div>
</div>

<script src="https://code.highcharts.com/highcharts.js"></script>

<script>

    var stationDensities = null;

    $(() => {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetStationDensity", "Home")',
            contentType: "application/json; charset=utf-8",
            success: function (recData) { debugger; stationDensities = recData; },
        });
    })


    var array = stationDensities.forEach(station => {
        return [station.StationName, stationBikeCount];
    });


    Highcharts.chart('barChart', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Available Bike Count of Stations'
        },

        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Bike Count'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: 'Bike Count: <b>{point.y:.1f} millions</b>'
        },
        series: [{
            name: 'Station Densities',
            data: stationDensities,
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                format: '{point.y:.1f}',
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
</script>
